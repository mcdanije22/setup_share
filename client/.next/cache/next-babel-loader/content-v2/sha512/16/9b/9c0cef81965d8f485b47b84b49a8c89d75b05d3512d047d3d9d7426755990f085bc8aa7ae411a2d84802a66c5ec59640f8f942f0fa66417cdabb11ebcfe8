{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/joshmcdaniel/Documents/work/repos/setup_share/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/joshmcdaniel/Documents/work/repos/setup_share/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/joshmcdaniel/Documents/work/repos/setup_share/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/joshmcdaniel/Documents/work/repos/setup_share/pages/dashboard.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useContext, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { UserContext } from \"../utils/context/userContext\";\nimport styles from \"../pageStyles/dashboard.module.scss\";\nimport DashboardLayout from \"../components/Layout/DashboardLayout\";\nimport { Button, PageHeader } from \"antd\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport { BaseAPI } from \"../utils/constants/common\";\nimport axios from \"axios\";\nimport ProjectsList from \"../components/projectList/ProjectList\";\nimport { useCookies } from \"react-cookie\";\nexport var __N_SSP = true;\nexport default function Dashboard(props) {\n  _s();\n\n  var router = useRouter();\n\n  var _useContext = useContext(UserContext),\n      currentUser = _useContext.currentUser,\n      setUser = _useContext.setUser;\n\n  var userDashboardInfo = props.userDashboardInfo;\n\n  var _useState = useState(),\n      activeSetup = _useState[0],\n      setActiveSetup = _useState[1];\n\n  var _useCookies = useCookies([\"user\"]),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      setCookies = _useCookies2[1];\n\n  useEffect(function () {\n    if (!currentUser) {\n      reload();\n    }\n  }, []);\n\n  var reload = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response, userInfo;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"\".concat(BaseAPI, \"/user/usercontext\"), {\n                withCredentials: true\n              });\n\n            case 3:\n              response = _context.sent;\n              _context.next = 6;\n              return response.data;\n\n            case 6:\n              userInfo = _context.sent;\n              setUser(userInfo);\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              return _context.abrupt(\"return\", {\n                redirect: {\n                  permanent: false,\n                  destination: \"/login\"\n                }\n              });\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function reload() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var data = {\n    setups: [\"test\"],\n    items: [\"test item\"]\n  };\n  cookies.get(\"user\");\n  return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n    title: \"Dashboard\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: styles.dashboardContainer,\n      children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n        style: {\n          padding: \"1rem 0\"\n        },\n        title: \"Setups\",\n        extra: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          value: \"small\",\n          shape: \"round\",\n          children: [/*#__PURE__*/_jsxDEV(PlusOutlined, {}, \"2\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this), \"New setup\"]\n        }, \"1\", true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this)]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: function onClick() {\n          setCookie(\"user\", JSON.stringify(data), {\n            path: \"/\",\n            maxAge: 3600,\n            // Expires after 1hr\n            sameSite: true\n          });\n        },\n        type: \"primary\",\n        children: [\"test\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ProjectsList, {\n        projects: userDashboardInfo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Dashboard, \"sF10gDQf6zWwuAbgadHj3YTVrvQ=\", false, function () {\n  return [useRouter, useCookies];\n});\n\n_c = Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/Users/joshmcdaniel/Documents/work/repos/setup_share/pages/dashboard.tsx"],"names":["useEffect","useContext","useState","useRouter","UserContext","styles","DashboardLayout","Button","PageHeader","PlusOutlined","BaseAPI","axios","ProjectsList","useCookies","Dashboard","props","router","currentUser","setUser","userDashboardInfo","activeSetup","setActiveSetup","cookies","setCookies","reload","get","withCredentials","response","data","userInfo","redirect","permanent","destination","setups","items","dashboardContainer","padding","setCookie","JSON","stringify","path","maxAge","sameSite"],"mappings":"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","sourcesContent":["import { useEffect, useContext, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { UserContext } from \"../utils/context/userContext\";\nimport styles from \"../pageStyles/dashboard.module.scss\";\nimport DashboardLayout from \"../components/Layout/DashboardLayout\";\nimport { Button, PageHeader } from \"antd\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport { GetServerSideProps } from \"next\";\nimport { BaseAPI } from \"../utils/constants/common\";\nimport axios from \"axios\";\nimport { pageAuthCheck } from \"../utils/helperFunctions/pageAuthCheck\";\nimport ProjectsList from \"../components/projectList/ProjectList\";\nimport cookies from \"next-cookies\";\nimport { useCookies } from \"react-cookie\";\nimport { getCookieParser } from \"next/dist/next-server/server/api-utils\";\n\ninterface Props {\n  userDashboardInfo: Array<dashboardItem>;\n}\ninterface dashboardItem {\n  user_id: string;\n  username: string;\n  setup_id: string;\n  setup_title: string;\n  setup_description: string;\n  setup_type: string;\n  setup_created_date: Date;\n  created_screen_type: any;\n  image_id: string;\n  image_url: string;\n  image_position: string;\n  image_position_number: number;\n}\n\nexport default function Dashboard(props: Props) {\n  const router = useRouter();\n  const { currentUser, setUser } = useContext<any>(UserContext);\n  const { userDashboardInfo } = props;\n  const [activeSetup, setActiveSetup] = useState();\n  const [cookies, setCookies] = useCookies<any>([\"user\"]);\n\n  useEffect(() => {\n    if (!currentUser) {\n      reload();\n    }\n  }, []);\n\n  const reload = async () => {\n    try {\n      const response = await axios.get(`${BaseAPI}/user/usercontext`, {\n        withCredentials: true,\n      });\n      const userInfo = await response.data;\n      setUser(userInfo);\n    } catch (error) {\n      return {\n        redirect: {\n          permanent: false,\n          destination: \"/login\",\n        },\n      };\n    }\n  };\n\n  const data = {\n    setups: [\"test\"],\n    items: [\"test item\"],\n  };\n\n  cookies.get(\"user\");\n\n  return (\n    <DashboardLayout title=\"Dashboard\">\n      <div id={styles.dashboardContainer}>\n        <PageHeader\n          style={{ padding: \"1rem 0\" }}\n          title=\"Setups\"\n          extra={[\n            <Button type=\"primary\" key=\"1\" value=\"small\" shape=\"round\">\n              <PlusOutlined key=\"2\" />\n              New setup\n            </Button>,\n          ]}\n        />\n        <Button\n          onClick={() => {\n            setCookie(\"user\", JSON.stringify(data), {\n              path: \"/\",\n              maxAge: 3600, // Expires after 1hr\n              sameSite: true,\n            });\n          }}\n          type=\"primary\"\n        >\n          test{\" \"}\n        </Button>\n        <ProjectsList projects={userDashboardInfo} />\n      </div>\n    </DashboardLayout>\n  );\n}\n\nexport const getServerSideProps: GetServerSideProps = async (context) => {\n  const allCookies = cookies(context);\n\n  const authCheck = await pageAuthCheck(context);\n  if (authCheck.props?.data.authd) {\n    try {\n      const response = await axios.get(\n        `${BaseAPI}/user/dashboard/${authCheck.props.data.user}`\n      );\n      const userDashboardInfo = await response.data;\n      return {\n        props: userDashboardInfo,\n      };\n    } catch (e) {\n      return {\n        redirect: {\n          permanent: false,\n          destination: \"/login\",\n        },\n      };\n    }\n  } else {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n};\n"]},"metadata":{},"sourceType":"module"}