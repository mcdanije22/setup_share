{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/joshmcdaniel/Documents/work/repos/setup_share/pages/analytics/[id].tsx\";\nimport { useContext } from \"react\";\nimport styles from \"../../pageStyles/analytics.module.scss\";\nimport { useRouter } from \"next/router\";\nimport DashboardLayout from \"../../components/Layout/DashboardLayout\";\nimport { pageAuthCheck } from \"../../utils/helperFunctions/pageAuthCheck\";\nimport { BaseAPI } from \"../../utils/constants/common\";\nimport axios from \"axios\";\nimport { Card, Row, Col, Modal, Button, PageHeader, Typography, Table, Space, Breadcrumb, message, Menu, Dropdown } from \"antd\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useEffect, useState } from \"react\";\nimport { UserContext } from \"../../utils/context/userContext\";\nconst {\n  Meta\n} = Card;\nconst {\n  Title,\n  Text\n} = Typography;\nexport default function AnalyticsPage(props) {\n  const router = useRouter();\n  const {\n    setUpInfo,\n    imageItems\n  } = props;\n  const {\n    0: currentImageItems,\n    1: setCurrentImageItems\n  } = useState(imageItems);\n  const {\n    currentUser,\n    setUser\n  } = useContext(UserContext);\n  const {\n    0: selectedImageItems,\n    1: setSelectedImageItems\n  } = useState();\n  const {\n    0: activeSelection,\n    1: setActiveSelection\n  } = useState();\n  const {\n    0: isLoading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: isItemModalOpen,\n    1: setItemModalStatus\n  } = useState(false);\n  const {\n    0: selectedItem,\n    1: setItemSelection\n  } = useState(null);\n  const {\n    0: isModalOpen,\n    1: setModalStatus\n  } = useState(false);\n  console.log(setUpInfo, imageItems);\n  useEffect(() => {\n    if (!currentUser) {\n      reload();\n    }\n  }, []);\n\n  const reload = async () => {\n    try {\n      const response = await axios.get(`${BaseAPI}/user/usercontext`, {\n        withCredentials: true\n      });\n      const userInfo = await response.data;\n      setUser(userInfo);\n    } catch (error) {\n      return {\n        redirect: {\n          permanent: false,\n          destination: \"/login\"\n        }\n      };\n    }\n  };\n\n  useEffect(() => {\n    if (!activeSelection) {\n      setActiveSelection(setUpInfo[0].image_id);\n    }\n  }, []);\n  useEffect(() => {\n    filterActiveImageSelection();\n  }, [activeSelection, currentImageItems]);\n\n  const filterActiveImageSelection = async () => {\n    setLoading(true);\n    const orgList = currentImageItems;\n    const newList = orgList.filter(item => {\n      return item.image_id === activeSelection;\n    });\n    setSelectedImageItems(newList);\n    setLoading(false);\n  };\n\n  const tableData = selectedImageItems === null || selectedImageItems === void 0 ? void 0 : selectedImageItems.map((item, i) => {\n    //need object to update here in useeffect after item delete\n    return {\n      key: item.item_id,\n      itemName: item.item_name,\n      affilateLink: item.item_url,\n      clicks: item.number_of_clicks\n    };\n  });\n  const columns = [{\n    title: \"Item Name\",\n    dataIndex: \"itemName\",\n    key: \"name\"\n  }, {\n    title: \"Affilate Link\",\n    dataIndex: \"affilateLink\",\n    key: \"link\",\n    responsive: [\"md\"]\n  }, {\n    title: \"Clicks\",\n    dataIndex: \"clicks\",\n    key: \"clicks\"\n  }, {\n    title: \"Action\",\n    key: \"action\",\n    render: (text, record) => /*#__PURE__*/_jsxDEV(Space, {\n      size: \"middle\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        danger: true,\n        type: \"link\",\n        icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 19\n        }, this),\n        onClick: () => {\n          setSelectedItem(record);\n          handleItemModalOpen();\n        },\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }, this)\n  }];\n\n  const handleItemModalCancel = () => {\n    setItemModalStatus(false);\n    setItemSelection(null);\n  };\n\n  const handleItemModalOpen = () => {\n    setItemModalStatus(true);\n  };\n\n  const setSelectedItem = item => {\n    setItemSelection(item);\n  };\n\n  const filterItemList = itemId => {\n    const orgItemList = currentImageItems;\n    const newList = orgItemList.filter(item => {\n      return item.item_id != itemId;\n    });\n    setCurrentImageItems(newList);\n  };\n\n  const deleteItem = async () => {\n    setLoading(true);\n\n    try {\n      const response = await axios.put(`${BaseAPI}/setup/item/delete`, {\n        itemId: selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.key,\n        userId: currentUser.user.user_id\n      }, {\n        withCredentials: true\n      });\n      const result = await response.data;\n      const successMessage = await result.message;\n      filterItemList(selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.key);\n      message.success(successMessage);\n      handleItemModalCancel();\n    } catch (error) {\n      const errorMessage = error.response.data.message;\n      message.error(errorMessage);\n      handleItemModalCancel();\n    }\n\n    setLoading(false);\n  };\n\n  const handleModalCancel = () => {\n    setModalStatus(false);\n  };\n\n  const handleModalOpen = () => {\n    setModalStatus(true);\n  };\n\n  const deleteSetup = async () => {\n    try {\n      const response = await axios.put(`${BaseAPI}/setup/delete`, {\n        setupId: setUpInfo[0].setup_id,\n        userId: currentUser.user.user_id\n      }, {\n        withCredentials: true\n      });\n      const result = await response.data;\n      const successMessage = await result.message;\n      message.success(successMessage);\n      handleModalCancel();\n      setTimeout(async () => {\n        await router.push(\"/dashboard\");\n        setLoading(false);\n      }, 1000);\n    } catch (error) {\n      const errorMessage = error.response.data.message;\n      message.error(errorMessage);\n      handleModalCancel();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n    title: `${setUpInfo[0].setup_title} setup`,\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      visible: isItemModalOpen,\n      title: \"Delete Item?\",\n      onCancel: handleItemModalCancel,\n      footer: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleItemModalCancel,\n        className: \"buttonShadow\",\n        children: \"Cancel\"\n      }, \"back\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        danger: true,\n        className: \"buttonShadow\",\n        onClick: deleteItem,\n        disabled: isLoading,\n        children: \"Delete\"\n      }, \"submit\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this)],\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"modalContainer\",\n        style: {\n          textAlign: \"center\",\n          padding: \"1rem\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          children: [\"Delete \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.itemName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 20\n          }, this), \" Item From Setup\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      visible: isModalOpen,\n      title: \"Delete setup?\",\n      onCancel: handleModalCancel,\n      footer: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleModalCancel,\n        className: \"buttonShadow\",\n        children: \"Cancel\"\n      }, \"back\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        danger: true,\n        className: \"buttonShadow\",\n        onClick: deleteSetup,\n        disabled: isLoading,\n        children: \"Delete\"\n      }, \"submit\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }, this)],\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"modalContainer\",\n        style: {\n          textAlign: \"center\",\n          padding: \"1rem\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          children: [\"Delete \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: setUpInfo[0].setup_title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 20\n          }, this), \" setup\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: styles.analyticsContainer,\n      children: [/*#__PURE__*/_jsxDEV(Breadcrumb, {\n        children: [/*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            href: `/dashboard`,\n            children: \"Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n          children: [setUpInfo[0].setup_title, \" setup\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PageHeader, {\n        style: {\n          padding: \"1rem 0\"\n        },\n        title: `${setUpInfo[0].setup_title} Analytics`,\n        subTitle: `${setUpInfo[0].number_of_visits} Views` //TODO: need to change url when site name chosen\n        ,\n        extra: [/*#__PURE__*/_jsxDEV(Dropdown, {\n          overlay: /*#__PURE__*/_jsxDEV(Menu, {\n            children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flocalhost:3000/setup/${setUpInfo[0].setup_id}`,\n                target: \"_blank\",\n                rel: \"noopener\",\n                children: \"Facebook\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `https://twitter.com/intent/tweet?url=https%3a%2f%2flocalhost:3000/setup/${setUpInfo[0].setup_id}`,\n                target: \"_blank\",\n                children: \"Twitter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `https://www.reddit.com/submit?url=https%3a%2f%2flocalhost:3000/setup/${setUpInfo[0].setup_id}`,\n                target: \"_blank\",\n                children: \"Reddit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 17\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            ghost: true,\n            onClick: handleModalOpen,\n            children: \"Share\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this)\n        }, \"1\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          danger: true,\n          onClick: handleModalOpen,\n          children: \"Delete\"\n        }, \"2\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 13\n        }, this)]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          gutter: [48, 28],\n          justify: \"start\",\n          children: setUpInfo.sort((a, b) => a.image_position_number > b.image_position_number ? 1 : -1).map((setupImage, i) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                xs: {\n                  span: 24\n                },\n                md: {\n                  span: 12\n                },\n                lg: {\n                  span: 6\n                },\n                className: styles.cardSpacer,\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  hoverable: true,\n                  cover: /*#__PURE__*/_jsxDEV(\"img\", {\n                    alt: \"setup photo\",\n                    src: setupImage.image_url\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 384,\n                    columnNumber: 27\n                  }, this),\n                  onClick: () => {\n                    setActiveSelection(setupImage.image_id);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Meta, {\n                    title: [/*#__PURE__*/_jsxDEV(Title, {\n                      level: 5,\n                      className: setupImage.image_id === activeSelection ? styles.active : \"\",\n                      children: [setupImage.image_position, \" Image\"]\n                    }, \"1\", true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 392,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 390,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 21\n              }, this)\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        style: {\n          marginTop: \"6rem\"\n        },\n        columns: columns,\n        dataSource: tableData,\n        loading: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 247,\n    columnNumber: 5\n  }, this);\n}\nexport const getServerSideProps = async context => {\n  var _authCheck$props;\n\n  const {\n    id\n  } = context.query;\n  const authCheck = await pageAuthCheck(context);\n\n  if ((_authCheck$props = authCheck.props) !== null && _authCheck$props !== void 0 && _authCheck$props.data.authd) {\n    try {\n      const response = await axios.get(`${BaseAPI}/user/analytics/${id}`);\n      const setupAnalyticsInfo = await response.data;\n\n      if (setupAnalyticsInfo.setUpInfo.length === 0) {\n        return {\n          redirect: {\n            permanent: false,\n            destination: \"/404\"\n          }\n        };\n      }\n\n      if (authCheck.props.data.user !== setupAnalyticsInfo.setUpInfo[0].user_id) {\n        return {\n          redirect: {\n            permanent: false,\n            destination: \"/dashboard\"\n          }\n        };\n      } else {\n        return {\n          props: setupAnalyticsInfo\n        };\n      }\n    } catch (e) {\n      return {\n        redirect: {\n          permanent: false,\n          destination: \"/404\"\n        }\n      };\n    }\n  } else {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\"\n      }\n    };\n  }\n};","map":{"version":3,"sources":["/Users/joshmcdaniel/Documents/work/repos/setup_share/pages/analytics/[id].tsx"],"names":["useContext","styles","useRouter","DashboardLayout","pageAuthCheck","BaseAPI","axios","Card","Row","Col","Modal","Button","PageHeader","Typography","Table","Space","Breadcrumb","message","Menu","Dropdown","DeleteOutlined","Link","useEffect","useState","UserContext","Meta","Title","Text","AnalyticsPage","props","router","setUpInfo","imageItems","currentImageItems","setCurrentImageItems","currentUser","setUser","selectedImageItems","setSelectedImageItems","activeSelection","setActiveSelection","isLoading","setLoading","isItemModalOpen","setItemModalStatus","selectedItem","setItemSelection","isModalOpen","setModalStatus","console","log","reload","response","get","withCredentials","userInfo","data","error","redirect","permanent","destination","image_id","filterActiveImageSelection","orgList","newList","filter","item","tableData","map","i","key","item_id","itemName","item_name","affilateLink","item_url","clicks","number_of_clicks","columns","title","dataIndex","responsive","render","text","record","setSelectedItem","handleItemModalOpen","handleItemModalCancel","filterItemList","itemId","orgItemList","deleteItem","put","userId","user","user_id","result","successMessage","success","errorMessage","handleModalCancel","handleModalOpen","deleteSetup","setupId","setup_id","setTimeout","push","setup_title","textAlign","padding","analyticsContainer","number_of_visits","sort","a","b","image_position_number","setupImage","span","cardSpacer","image_url","active","image_position","marginTop","getServerSideProps","context","id","query","authCheck","authd","setupAnalyticsInfo","length","e"],"mappings":"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","sourcesContent":["import { useContext } from \"react\";\nimport styles from \"../../pageStyles/analytics.module.scss\";\nimport { useRouter } from \"next/router\";\nimport dashboardStyles from \"../../../components/Layout/DashboardLayout.module.scss\";\nimport DashboardLayout from \"../../components/Layout/DashboardLayout\";\nimport { GetServerSideProps } from \"next\";\nimport { pageAuthCheck } from \"../../utils/helperFunctions/pageAuthCheck\";\nimport { BaseAPI } from \"../../utils/constants/common\";\nimport axios from \"axios\";\nimport {\n  Card,\n  Row,\n  Col,\n  Modal,\n  Button,\n  PageHeader,\n  Typography,\n  Table,\n  Space,\n  Breadcrumb,\n  message,\n  Menu,\n  Dropdown,\n} from \"antd\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport { useEffect, useState } from \"react\";\nimport { UserContext } from \"../../utils/context/userContext\";\n\nconst { Meta } = Card;\nconst { Title, Text } = Typography;\n\ninterface Props {\n  setUpInfo: Array<Setup>;\n  imageItems: Array<Item>;\n}\n\ninterface Setup {\n  setup_id: string;\n  setup_title: string;\n  setup_description: string;\n  setup_type: string;\n  setup_created_date: Date;\n  created_screen_type?: any;\n  image_id: string;\n  image_url: string;\n  image_position: string;\n  image_position_number: number;\n  user_id: string;\n  username: string;\n  number_of_visits: number;\n}\n\ninterface Item {\n  item_id: string;\n  image_id: string;\n  coords_list: number[];\n  item_name: string;\n  item_url: string;\n  number_of_clicks: number;\n}\n\ninterface RowItem {\n  key: string;\n  itemName: string;\n  affilateLink: string;\n}\n\nexport default function AnalyticsPage(props: Props) {\n  const router = useRouter();\n  const { setUpInfo, imageItems } = props;\n  const [currentImageItems, setCurrentImageItems] = useState(imageItems);\n  const { currentUser, setUser } = useContext<any>(UserContext);\n  const [selectedImageItems, setSelectedImageItems] = useState<Array<Item>>();\n  const [activeSelection, setActiveSelection] = useState<string>();\n  const [isLoading, setLoading] = useState<boolean>(false);\n  const [isItemModalOpen, setItemModalStatus] = useState<boolean>(false);\n  const [selectedItem, setItemSelection] = useState<RowItem | null>(null);\n  const [isModalOpen, setModalStatus] = useState<boolean>(false);\n  console.log(setUpInfo, imageItems);\n\n  useEffect(() => {\n    if (!currentUser) {\n      reload();\n    }\n  }, []);\n\n  const reload = async () => {\n    try {\n      const response = await axios.get(`${BaseAPI}/user/usercontext`, {\n        withCredentials: true,\n      });\n      const userInfo = await response.data;\n      setUser(userInfo);\n    } catch (error) {\n      return {\n        redirect: {\n          permanent: false,\n          destination: \"/login\",\n        },\n      };\n    }\n  };\n\n  useEffect(() => {\n    if (!activeSelection) {\n      setActiveSelection(setUpInfo[0].image_id);\n    }\n  }, []);\n\n  useEffect(() => {\n    filterActiveImageSelection();\n  }, [activeSelection, currentImageItems]);\n\n  const filterActiveImageSelection = async () => {\n    setLoading(true);\n    const orgList = currentImageItems;\n    const newList = orgList.filter((item) => {\n      return item.image_id === activeSelection;\n    });\n    setSelectedImageItems(newList);\n    setLoading(false);\n  };\n\n  const tableData = selectedImageItems?.map((item, i) => {\n    //need object to update here in useeffect after item delete\n    return {\n      key: item.item_id,\n      itemName: item.item_name,\n      affilateLink: item.item_url,\n      clicks: item.number_of_clicks,\n    };\n  });\n\n  const columns = [\n    {\n      title: \"Item Name\",\n      dataIndex: \"itemName\",\n      key: \"name\",\n    },\n    {\n      title: \"Affilate Link\",\n      dataIndex: \"affilateLink\",\n      key: \"link\",\n      responsive: [\"md\"],\n    },\n    {\n      title: \"Clicks\",\n      dataIndex: \"clicks\",\n      key: \"clicks\",\n    },\n    {\n      title: \"Action\",\n      key: \"action\",\n      render: (text: string, record: any) => (\n        <Space size=\"middle\">\n          <Button\n            danger\n            type=\"link\"\n            icon={<DeleteOutlined />}\n            onClick={() => {\n              setSelectedItem(record);\n              handleItemModalOpen();\n            }}\n          >\n            Delete\n          </Button>\n        </Space>\n      ),\n    },\n  ];\n  const handleItemModalCancel = () => {\n    setItemModalStatus(false);\n    setItemSelection(null);\n  };\n  const handleItemModalOpen = () => {\n    setItemModalStatus(true);\n  };\n  const setSelectedItem = (item: RowItem) => {\n    setItemSelection(item);\n  };\n  const filterItemList = (itemId: string | undefined) => {\n    const orgItemList = currentImageItems;\n    const newList = orgItemList.filter((item) => {\n      return item.item_id != itemId;\n    });\n    setCurrentImageItems(newList);\n  };\n\n  const deleteItem = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.put(\n        `${BaseAPI}/setup/item/delete`,\n        {\n          itemId: selectedItem?.key,\n          userId: currentUser.user.user_id,\n        },\n        { withCredentials: true }\n      );\n      const result = await response.data;\n      const successMessage = await result.message;\n      filterItemList(selectedItem?.key);\n      message.success(successMessage);\n      handleItemModalCancel();\n    } catch (error: any) {\n      const errorMessage = error.response.data.message;\n      message.error(errorMessage);\n      handleItemModalCancel();\n    }\n    setLoading(false);\n  };\n\n  const handleModalCancel = () => {\n    setModalStatus(false);\n  };\n  const handleModalOpen = () => {\n    setModalStatus(true);\n  };\n\n  const deleteSetup = async () => {\n    try {\n      const response = await axios.put(\n        `${BaseAPI}/setup/delete`,\n        {\n          setupId: setUpInfo[0].setup_id,\n          userId: currentUser.user.user_id,\n        },\n        { withCredentials: true }\n      );\n      const result = await response.data;\n      const successMessage = await result.message;\n      message.success(successMessage);\n      handleModalCancel();\n      setTimeout(async () => {\n        await router.push(\"/dashboard\");\n        setLoading(false);\n      }, 1000);\n    } catch (error: any) {\n      const errorMessage = error.response.data.message;\n      message.error(errorMessage);\n      handleModalCancel();\n    }\n  };\n\n  return (\n    <DashboardLayout title={`${setUpInfo[0].setup_title} setup`}>\n      <Modal\n        visible={isItemModalOpen}\n        title={\"Delete Item?\"}\n        onCancel={handleItemModalCancel}\n        footer={[\n          <Button\n            key=\"back\"\n            onClick={handleItemModalCancel}\n            className=\"buttonShadow\"\n          >\n            Cancel\n          </Button>,\n          <Button\n            key=\"submit\"\n            danger\n            className=\"buttonShadow\"\n            onClick={deleteItem}\n            disabled={isLoading}\n          >\n            Delete\n          </Button>,\n        ]}\n      >\n        <div\n          id=\"modalContainer\"\n          style={{ textAlign: \"center\", padding: \"1rem\" }}\n        >\n          <Text>\n            Delete <b>{selectedItem?.itemName}</b> Item From Setup\n          </Text>\n        </div>\n      </Modal>\n      <Modal\n        visible={isModalOpen}\n        title={\"Delete setup?\"}\n        onCancel={handleModalCancel}\n        footer={[\n          <Button\n            key=\"back\"\n            onClick={handleModalCancel}\n            className=\"buttonShadow\"\n          >\n            Cancel\n          </Button>,\n          <Button\n            key=\"submit\"\n            danger\n            className=\"buttonShadow\"\n            onClick={deleteSetup}\n            disabled={isLoading}\n          >\n            Delete\n          </Button>,\n        ]}\n      >\n        <div\n          id=\"modalContainer\"\n          style={{ textAlign: \"center\", padding: \"1rem\" }}\n        >\n          <Text>\n            Delete <b>{setUpInfo[0].setup_title}</b> setup\n          </Text>\n        </div>\n      </Modal>\n      <div id={styles.analyticsContainer}>\n        <Breadcrumb>\n          <Breadcrumb.Item>\n            <Link href={`/dashboard`}>Dashboard</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>{setUpInfo[0].setup_title} setup</Breadcrumb.Item>\n        </Breadcrumb>\n        <PageHeader\n          style={{ padding: \"1rem 0\" }}\n          title={`${setUpInfo[0].setup_title} Analytics`}\n          subTitle={`${setUpInfo[0].number_of_visits} Views`}\n          //TODO: need to change url when site name chosen\n          extra={[\n            <Dropdown\n              key=\"1\"\n              overlay={\n                <Menu>\n                  <Menu.Item>\n                    <a\n                      href={`https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flocalhost:3000/setup/${setUpInfo[0].setup_id}`}\n                      target=\"_blank\"\n                      rel=\"noopener\"\n                    >\n                      Facebook\n                    </a>\n                  </Menu.Item>\n                  <Menu.Item>\n                    <a\n                      href={`https://twitter.com/intent/tweet?url=https%3a%2f%2flocalhost:3000/setup/${setUpInfo[0].setup_id}`}\n                      target=\"_blank\"\n                    >\n                      Twitter\n                    </a>\n                  </Menu.Item>\n                  <Menu.Item>\n                    <a\n                      href={`https://www.reddit.com/submit?url=https%3a%2f%2flocalhost:3000/setup/${setUpInfo[0].setup_id}`}\n                      target=\"_blank\"\n                    >\n                      Reddit\n                    </a>\n                  </Menu.Item>\n                </Menu>\n              }\n            >\n              <Button type=\"primary\" ghost onClick={handleModalOpen}>\n                Share\n              </Button>\n            </Dropdown>,\n            <Button key=\"2\" danger onClick={handleModalOpen}>\n              Delete\n            </Button>,\n          ]}\n        />\n        <div>\n          <Row gutter={[48, 28]} justify=\"start\">\n            {setUpInfo\n              .sort((a, b) =>\n                a.image_position_number > b.image_position_number ? 1 : -1\n              )\n              .map((setupImage, i) => {\n                return (\n                  <div key={i}>\n                    <Col\n                      xs={{ span: 24 }}\n                      md={{ span: 12 }}\n                      lg={{ span: 6 }}\n                      className={styles.cardSpacer}\n                    >\n                      <Card\n                        hoverable\n                        cover={\n                          <img alt=\"setup photo\" src={setupImage.image_url} />\n                        }\n                        onClick={() => {\n                          setActiveSelection(setupImage.image_id);\n                        }}\n                      >\n                        <Meta\n                          title={[\n                            <Title\n                              level={5}\n                              className={\n                                setupImage.image_id === activeSelection\n                                  ? styles.active\n                                  : \"\"\n                              }\n                              key=\"1\"\n                            >\n                              {setupImage.image_position} Image\n                            </Title>,\n                          ]}\n                        />\n                      </Card>\n                    </Col>\n                  </div>\n                );\n              })}\n          </Row>\n        </div>\n        <Table\n          style={{ marginTop: \"6rem\" }}\n          columns={columns}\n          dataSource={tableData}\n          loading={isLoading}\n        />\n      </div>\n    </DashboardLayout>\n  );\n}\n\nexport const getServerSideProps: GetServerSideProps = async (context) => {\n  const { id } = context.query;\n  const authCheck = await pageAuthCheck(context);\n  if (authCheck.props?.data.authd) {\n    try {\n      const response = await axios.get(`${BaseAPI}/user/analytics/${id}`);\n      const setupAnalyticsInfo = await response.data;\n      if (setupAnalyticsInfo.setUpInfo.length === 0) {\n        return {\n          redirect: {\n            permanent: false,\n            destination: \"/404\",\n          },\n        };\n      }\n      if (\n        authCheck.props.data.user !== setupAnalyticsInfo.setUpInfo[0].user_id\n      ) {\n        return {\n          redirect: {\n            permanent: false,\n            destination: \"/dashboard\",\n          },\n        };\n      } else {\n        return {\n          props: setupAnalyticsInfo,\n        };\n      }\n    } catch (e) {\n      return {\n        redirect: {\n          permanent: false,\n          destination: \"/404\",\n        },\n      };\n    }\n  } else {\n    return {\n      redirect: {\n        permanent: false,\n        destination: \"/login\",\n      },\n    };\n  }\n};\n"]},"metadata":{},"sourceType":"module"}