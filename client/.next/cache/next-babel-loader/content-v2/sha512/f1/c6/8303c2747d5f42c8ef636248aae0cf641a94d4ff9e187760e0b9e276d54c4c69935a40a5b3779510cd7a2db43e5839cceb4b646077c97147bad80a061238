{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"/Users/joshmcdaniel/Documents/work/repos/setup_share/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/joshmcdaniel/Documents/work/repos/setup_share/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/joshmcdaniel/Documents/work/repos/setup_share/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/joshmcdaniel/Documents/work/repos/setup_share/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/joshmcdaniel/Documents/work/repos/setup_share/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/joshmcdaniel/Documents/work/repos/setup_share/components/CreateSetupForms/CreateSetupStepThreeForm.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Form, Input, Row, Col, List, Space, message, Select, Typography, Modal } from \"antd\";\nimport { ArrowRightOutlined, ArrowLeftOutlined, DeleteTwoTone } from \"@ant-design/icons\"; // @ts-ignore\n\nimport ImageMapper from \"react-image-mapper\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nvar CreateSetupStepThreeForm = function CreateSetupStepThreeForm(_ref) {\n  _s();\n\n  var setStepThreeForm = _ref.setStepThreeForm,\n      handleStepChange = _ref.handleStepChange,\n      stepThreeForm = _ref.stepThreeForm,\n      stepTwoForm = _ref.stepTwoForm,\n      imageNumber = _ref.imageNumber,\n      currentStep = _ref.currentStep,\n      availImagePositions = _ref.availImagePositions,\n      removeImagePosition = _ref.removeImagePosition,\n      addImagePosition = _ref.addImagePosition;\n\n  var _useState = useState(null),\n      image = _useState[0],\n      setImage = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      tempCoordList = _useState3[0],\n      setTempCoordList = _useState3[1];\n\n  var _useState4 = useState(false),\n      drawingStatus = _useState4[0],\n      setDrawingStatus = _useState4[1];\n\n  var _useState5 = useState(false),\n      addItemStatus = _useState5[0],\n      setAddItemStatus = _useState5[1];\n\n  var _useState6 = useState([]),\n      tempAreas = _useState6[0],\n      setTempAreas = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      position = _useState7[0],\n      setPosition = _useState7[1];\n\n  var _useState8 = useState(false),\n      modalStatus = _useState8[0],\n      setModalStatus = _useState8[1];\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var Option = Select.Option;\n  var Text = Typography.Text;\n\n  var onPreview = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var src, image;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return new Promise(function (resolve) {\n                var reader = new FileReader();\n                reader.readAsDataURL(stepTwoForm[imageNumber].originFileObj);\n\n                reader.onload = function () {\n                  return resolve(reader.result);\n                };\n              });\n\n            case 3:\n              src = _context.sent;\n              image = new Image();\n              image.src = src;\n              setImage(src);\n              setLoading(false);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onPreview() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    onPreview();\n\n    if (imageNumber === 0 && stepThreeForm.imageOne) {\n      setTempAreas(_toConsumableArray(stepThreeForm.imageOne.areas)); //removed so that it is not double adding positions after going through and then going back.\n      //Saves image position in the image state object, just not for form\n      // setPosition(stepThreeForm.imageOne.imagePosition);\n\n      addImagePosition(stepThreeForm.imageOne.imagePosition);\n    } else if (imageNumber === 1 && stepThreeForm.imageTwo) {\n      setTempAreas(_toConsumableArray(stepThreeForm.imageTwo.areas)); // setPosition(stepThreeForm.imageTwo.imagePosition);\n\n      addImagePosition(stepThreeForm.imageTwo.imagePosition);\n    } else if (imageNumber === 2 && stepThreeForm.imageThree) {\n      setTempAreas(_toConsumableArray(stepThreeForm.imageThree.areas)); // setPosition(stepThreeForm.imageThree.imagePosition);\n\n      addImagePosition(stepThreeForm.imageThree.imagePosition);\n    }\n  }, []);\n  var MAP = {\n    name: \"image-map\",\n    imagePosition: position,\n    areas: _toConsumableArray(tempAreas)\n  };\n\n  var startItemAdd = function startItemAdd() {\n    setTempAreas([{\n      id: uuidv4(),\n      name: \"\",\n      shape: \"poly\",\n      coords: _toConsumableArray(tempCoordList),\n      preFillColor: \"green\",\n      fillColor: \"blue\",\n      url: \"\"\n    }].concat(_toConsumableArray(tempAreas)));\n    setAddItemStatus(true);\n  };\n\n  var cancelItemAdd = function cancelItemAdd() {\n    //not great, mutating state directly\n    tempAreas.shift();\n    MAP.areas.shift();\n    setTempCoordList([]);\n    setAddItemStatus(false);\n    setDrawingStatus(false);\n    onReset();\n  };\n\n  var startDrawing = function startDrawing() {\n    setDrawingStatus(true);\n  };\n\n  var addCoordToItem = function addCoordToItem(coords) {\n    setTempCoordList([].concat(_toConsumableArray(tempCoordList), _toConsumableArray(coords)));\n  };\n\n  var undoLastCoord = function undoLastCoord() {\n    MAP.areas[0].coords.pop();\n    MAP.areas[0].coords.pop();\n    setTempCoordList(_toConsumableArray(MAP.areas[0].coords));\n  };\n\n  var onReset = function onReset() {\n    form.resetFields();\n  };\n\n  var finishAddItem = function finishAddItem(values) {\n    //need logic to stop adding items that have names but no items drawn\n    var name = values.name,\n        url = values.url;\n\n    if (MAP.areas[0].coords.length === 0) {\n      message.error(\"Draw Points On Image Before Submitting\");\n    } else {\n      tempAreas[0].name = name;\n      tempAreas[0].url = url;\n      setAddItemStatus(false);\n      setDrawingStatus(false);\n      setTempCoordList([]);\n      onReset();\n    }\n  };\n\n  var removeItem = function removeItem(id) {\n    var currentArea = tempAreas;\n    var filteredList = currentArea.filter(function (item) {\n      return item.id !== id;\n    });\n    setTempAreas(filteredList);\n    MAP.areas = filteredList;\n  };\n\n  var positionOnChange = function positionOnChange(values) {\n    setPosition(values);\n  };\n\n  var handleModalCancel = function handleModalCancel() {\n    setModalStatus(false);\n  };\n\n  var addItemCheck = function addItemCheck() {\n    if (addItemStatus) {\n      setModalStatus(true);\n    } else {\n      submitImageData();\n    }\n  };\n\n  var submitImageData = function submitImageData() {\n    if (position === \"\") {\n      message.error(\"Please Select An Image Position First\");\n    } else {\n      if (currentStep === 3) {\n        setStepThreeForm(function (prevState) {\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            imageOne: _objectSpread({}, MAP)\n          });\n        });\n\n        if (stepTwoForm.length > 1) {\n          handleStepChange(4);\n        } else {\n          handleStepChange(6);\n        }\n      } else if (currentStep === 4) {\n        setStepThreeForm(function (prevState) {\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            imageTwo: _objectSpread({}, MAP)\n          });\n        });\n\n        if (stepTwoForm.length > 2) {\n          handleStepChange(5);\n        } else {\n          handleStepChange(6);\n        }\n      } else if (currentStep === 5) {\n        setStepThreeForm(function (prevState) {\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            imageThree: _objectSpread({}, MAP)\n          });\n        });\n        handleStepChange(6);\n      }\n\n      removeImagePosition(MAP.imagePosition);\n    }\n  };\n\n  if (image) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"stepThreeFormContainer\",\n      children: [/*#__PURE__*/_jsxDEV(Modal, {\n        visible: modalStatus,\n        title: \"Continue?\",\n        onCancel: handleModalCancel,\n        footer: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleModalCancel,\n          children: \"Go back\"\n        }, \"back\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          onClick: function onClick() {\n            setModalStatus(false);\n            cancelItemAdd();\n            submitImageData();\n          },\n          children: \"Continue\"\n        }, \"submit\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, _this)],\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"modalContainer\",\n          style: {\n            textAlign: \"center\",\n            padding: \"1rem\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Text, {\n            children: \"Current Item Not Submitted\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Text, {\n            children: \"Continue Without Adding Item?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"imgContainer\",\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          justify: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(ImageMapper, {\n              src: image,\n              map: MAP,\n              width: 375,\n              onMouseEnter: function onMouseEnter(area) {\n                alert(\"test\");\n              },\n              onImageClick: function onImageClick(e) {\n                if (drawingStatus) {\n                  addCoordToItem([e.nativeEvent.offsetX, e.nativeEvent.offsetY]); //fixes lagging state for preview by updating local MAP object and state in same function\n\n                  MAP.areas[0].coords.push(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Row, {\n          justify: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            span: 20,\n            className: \"section\",\n            children: [/*#__PURE__*/_jsxDEV(Text, {\n              children: \"Image Position\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Select, {\n              placeholder: \"Image Position\",\n              style: {\n                width: \"100%\",\n                margin: \"1rem 0\"\n              },\n              onChange: positionOnChange,\n              defaultValue: position ? position : \"\",\n              children: availImagePositions.map(function (item, i) {\n                return /*#__PURE__*/_jsxDEV(Option, {\n                  value: item,\n                  children: item\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 21\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Row, {\n          justify: \"center\" //need to handle height being too small and overlaping buttons\n          ,\n          style: {\n            minHeight: \"100vh\"\n          },\n          className: \"section\",\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            span: 20,\n            children: [/*#__PURE__*/_jsxDEV(Form, {\n              name: \"form\",\n              form: form,\n              labelCol: {\n                span: 24\n              },\n              wrapperCol: {\n                span: 24\n              },\n              onFinish: finishAddItem,\n              children: [addItemStatus ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n                  label: \"Item Name\",\n                  name: \"name\",\n                  rules: [{\n                    required: true,\n                    message: \"Please input a item name\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    placeholder: \"Playstation 5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 328,\n                    columnNumber: 23\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                  label: \"URL\",\n                  name: \"url\",\n                  rules: [{\n                    required: true,\n                    message: \"Please input a url\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    placeholder: \"www.amazon.com/youraffilatelink\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 23\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(Button, {\n                type: \"primary\",\n                block: true,\n                onClick: startItemAdd,\n                size: \"large\",\n                shape: \"round\",\n                children: \"Add Item\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 19\n              }, _this), drawingStatus ? /*#__PURE__*/_jsxDEV(Row, {\n                justify: \"space-between\",\n                children: /*#__PURE__*/_jsxDEV(Space, {\n                  direction: \"vertical\",\n                  size: 30,\n                  style: {\n                    width: \"100%\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    type: \"primary\",\n                    block: true,\n                    shape: \"round\",\n                    size: \"large\",\n                    htmlType: \"submit\",\n                    children: \"Submit Item\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 358,\n                    columnNumber: 23\n                  }, _this), /*#__PURE__*/_jsxDEV(Button, {\n                    danger: true,\n                    block: true,\n                    shape: \"round\",\n                    size: \"large\",\n                    onClick: undoLastCoord,\n                    children: \"Undo Last point\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 23\n                  }, _this), /*#__PURE__*/_jsxDEV(Button, {\n                    danger: true,\n                    block: true,\n                    shape: \"round\",\n                    size: \"large\",\n                    onClick: cancelItemAdd,\n                    children: \"Cancel Add\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 376,\n                    columnNumber: 23\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 19\n              }, _this) : \"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, _this), addItemStatus && !drawingStatus ? /*#__PURE__*/_jsxDEV(Row, {\n              justify: \"space-between\",\n              children: /*#__PURE__*/_jsxDEV(Space, {\n                direction: \"vertical\",\n                size: 30,\n                style: {\n                  width: \"100%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  type: \"primary\",\n                  block: true,\n                  shape: \"round\",\n                  size: \"large\",\n                  onClick: startDrawing,\n                  children: \"Draw outline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(Button, {\n                  danger: true,\n                  block: true,\n                  size: \"large\",\n                  shape: \"round\",\n                  onClick: cancelItemAdd,\n                  children: \"Cancel Adding Item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 17\n            }, _this) : \"\", addItemStatus ? \"\" : /*#__PURE__*/_jsxDEV(List, {\n              style: {\n                marginTop: \"1rem\"\n              },\n              itemLayout: \"horizontal\",\n              children: tempAreas.map(function (item) {\n                return /*#__PURE__*/_jsxDEV(List.Item, {\n                  actions: [/*#__PURE__*/_jsxDEV(DeleteTwoTone, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 429,\n                    columnNumber: 35\n                  }, _this)],\n                  onClick: function onClick() {\n                    removeItem(item.id);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(List.Item.Meta, {\n                    title: item.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 434,\n                    columnNumber: 25\n                  }, _this)\n                }, item.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 23\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Row, {\n          justify: \"space-between\",\n          style: {\n            position: \"absolute\",\n            bottom: \"0\",\n            width: \"100%\",\n            marginBottom: \"1rem\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: function onClick() {\n              handleStepChange(currentStep - 1);\n            },\n            danger: true,\n            shape: \"circle\",\n            size: \"large\",\n            icon: /*#__PURE__*/_jsxDEV(ArrowLeftOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 21\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: addItemCheck,\n            type: \"primary\",\n            htmlType: \"submit\",\n            shape: \"circle\",\n            size: \"large\",\n            icon: /*#__PURE__*/_jsxDEV(ArrowRightOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 21\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, _this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"test\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 12\n    }, _this);\n  }\n};\n\n_s(CreateSetupStepThreeForm, \"D/czYUtLx6yFhDPgEc6QwZCBSjI=\", false, function () {\n  return [Form.useForm];\n});\n\n_c = CreateSetupStepThreeForm;\nexport default CreateSetupStepThreeForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateSetupStepThreeForm\");","map":{"version":3,"sources":["/Users/joshmcdaniel/Documents/work/repos/setup_share/components/CreateSetupForms/CreateSetupStepThreeForm.tsx"],"names":["React","useEffect","useState","Button","Form","Input","Row","Col","List","Space","message","Select","Typography","Modal","ArrowRightOutlined","ArrowLeftOutlined","DeleteTwoTone","ImageMapper","v4","uuidv4","CreateSetupStepThreeForm","setStepThreeForm","handleStepChange","stepThreeForm","stepTwoForm","imageNumber","currentStep","availImagePositions","removeImagePosition","addImagePosition","image","setImage","loading","setLoading","tempCoordList","setTempCoordList","drawingStatus","setDrawingStatus","addItemStatus","setAddItemStatus","tempAreas","setTempAreas","position","setPosition","modalStatus","setModalStatus","useForm","form","Option","Text","onPreview","Promise","resolve","reader","FileReader","readAsDataURL","originFileObj","onload","result","src","Image","imageOne","areas","imagePosition","imageTwo","imageThree","MAP","name","startItemAdd","id","shape","coords","preFillColor","fillColor","url","cancelItemAdd","shift","onReset","startDrawing","addCoordToItem","undoLastCoord","pop","resetFields","finishAddItem","values","length","error","removeItem","currentArea","filteredList","filter","item","positionOnChange","handleModalCancel","addItemCheck","submitImageData","prevState","textAlign","padding","area","alert","e","nativeEvent","offsetX","offsetY","push","width","margin","map","i","minHeight","span","required","marginTop","bottom","marginBottom"],"mappings":"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","sourcesContent":["import React, { Dispatch, SetStateAction, useEffect, useState } from \"react\";\nimport {\n  Button,\n  Form,\n  Input,\n  Row,\n  Col,\n  List,\n  Space,\n  message,\n  Select,\n  Typography,\n  Modal,\n} from \"antd\";\nimport {\n  ArrowRightOutlined,\n  ArrowLeftOutlined,\n  DeleteTwoTone,\n} from \"@ant-design/icons\";\n// @ts-ignore\nimport ImageMapper from \"react-image-mapper\";\nimport { v4 as uuidv4 } from \"uuid\";\n\ninterface Props {\n  setStepThreeForm: Dispatch<SetStateAction<object>>;\n  handleStepChange(number: number): void;\n  stepThreeForm: any;\n  stepTwoForm: any;\n  imageNumber: number;\n  currentStep: number;\n  availImagePositions: Array<string>;\n  removeImagePosition(position: string): void;\n  addImagePosition(position: string): void;\n}\n\ninterface Map {\n  imagePosition: string;\n  name: string;\n  areas: Array<Area>;\n}\n\ninterface Area {\n  id: string;\n  name: string;\n  shape: string;\n  coords: Array<number>;\n  preFillColor: string;\n  fillColor: string;\n  url: string;\n}\n\ninterface FormValues {\n  name: string;\n  url: string;\n}\n\nconst CreateSetupStepThreeForm: React.FC<Props> = ({\n  setStepThreeForm,\n  handleStepChange,\n  stepThreeForm,\n  stepTwoForm,\n  imageNumber,\n  currentStep,\n  availImagePositions,\n  removeImagePosition,\n  addImagePosition,\n}) => {\n  const [image, setImage] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [tempCoordList, setTempCoordList] = useState<Array<number>>([]);\n  const [drawingStatus, setDrawingStatus] = useState(false);\n  const [addItemStatus, setAddItemStatus] = useState(false);\n  const [tempAreas, setTempAreas] = useState<Array<Area>>([]);\n  const [position, setPosition] = useState(\"\");\n  const [modalStatus, setModalStatus] = useState<boolean>(false);\n\n  const [form] = Form.useForm();\n  const { Option } = Select;\n  const { Text } = Typography;\n\n  const onPreview = async () => {\n    setLoading(true);\n    const src: any = await new Promise((resolve) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(stepTwoForm[imageNumber].originFileObj);\n      reader.onload = () => resolve(reader.result);\n    });\n\n    const image = new Image();\n    image.src = src;\n    setImage(src);\n    setLoading(false);\n  };\n  useEffect(() => {\n    onPreview();\n    if (imageNumber === 0 && stepThreeForm.imageOne) {\n      setTempAreas([...stepThreeForm.imageOne.areas]);\n      //removed so that it is not double adding positions after going through and then going back.\n      //Saves image position in the image state object, just not for form\n      // setPosition(stepThreeForm.imageOne.imagePosition);\n      addImagePosition(stepThreeForm.imageOne.imagePosition);\n    } else if (imageNumber === 1 && stepThreeForm.imageTwo) {\n      setTempAreas([...stepThreeForm.imageTwo.areas]);\n      // setPosition(stepThreeForm.imageTwo.imagePosition);\n      addImagePosition(stepThreeForm.imageTwo.imagePosition);\n    } else if (imageNumber === 2 && stepThreeForm.imageThree) {\n      setTempAreas([...stepThreeForm.imageThree.areas]);\n      // setPosition(stepThreeForm.imageThree.imagePosition);\n      addImagePosition(stepThreeForm.imageThree.imagePosition);\n    }\n  }, []);\n\n  let MAP: Map = {\n    name: \"image-map\",\n    imagePosition: position,\n    areas: [...tempAreas],\n  };\n  const startItemAdd = () => {\n    setTempAreas([\n      {\n        id: uuidv4(),\n        name: \"\",\n        shape: \"poly\",\n        coords: [...tempCoordList],\n        preFillColor: \"green\",\n        fillColor: \"blue\",\n        url: \"\",\n      },\n      ...tempAreas,\n    ]);\n    setAddItemStatus(true);\n  };\n  const cancelItemAdd = () => {\n    //not great, mutating state directly\n    tempAreas.shift();\n    MAP.areas.shift();\n    setTempCoordList([]);\n    setAddItemStatus(false);\n    setDrawingStatus(false);\n    onReset();\n  };\n  const startDrawing = () => {\n    setDrawingStatus(true);\n  };\n\n  const addCoordToItem = (coords: Array<number>) => {\n    setTempCoordList([...tempCoordList, ...coords]);\n  };\n  const undoLastCoord = () => {\n    MAP.areas[0].coords.pop();\n    MAP.areas[0].coords.pop();\n    setTempCoordList([...MAP.areas[0].coords]);\n  };\n  const onReset = () => {\n    form.resetFields();\n  };\n  const finishAddItem = (values: FormValues) => {\n    //need logic to stop adding items that have names but no items drawn\n    const { name, url } = values;\n    if (MAP.areas[0].coords.length === 0) {\n      message.error(\"Draw Points On Image Before Submitting\");\n    } else {\n      tempAreas[0].name = name;\n      tempAreas[0].url = url;\n      setAddItemStatus(false);\n      setDrawingStatus(false);\n      setTempCoordList([]);\n      onReset();\n    }\n  };\n  const removeItem = (id: string) => {\n    const currentArea = tempAreas;\n    const filteredList = currentArea.filter((item) => item.id !== id);\n    setTempAreas(filteredList);\n    MAP.areas = filteredList;\n  };\n  const positionOnChange = (values: string) => {\n    setPosition(values);\n  };\n  const handleModalCancel = () => {\n    setModalStatus(false);\n  };\n\n  const addItemCheck = () => {\n    if (addItemStatus) {\n      setModalStatus(true);\n    } else {\n      submitImageData();\n    }\n  };\n  const submitImageData = () => {\n    if (position === \"\") {\n      message.error(\"Please Select An Image Position First\");\n    } else {\n      if (currentStep === 3) {\n        setStepThreeForm((prevState) => ({\n          ...prevState,\n          imageOne: { ...MAP },\n        }));\n        if (stepTwoForm.length > 1) {\n          handleStepChange(4);\n        } else {\n          handleStepChange(6);\n        }\n      } else if (currentStep === 4) {\n        setStepThreeForm((prevState) => ({\n          ...prevState,\n          imageTwo: { ...MAP },\n        }));\n        if (stepTwoForm.length > 2) {\n          handleStepChange(5);\n        } else {\n          handleStepChange(6);\n        }\n      } else if (currentStep === 5) {\n        setStepThreeForm((prevState) => ({\n          ...prevState,\n          imageThree: { ...MAP },\n        }));\n        handleStepChange(6);\n      }\n      removeImagePosition(MAP.imagePosition);\n    }\n  };\n\n  if (image) {\n    return (\n      <div id=\"stepThreeFormContainer\">\n        <Modal\n          visible={modalStatus}\n          title=\"Continue?\"\n          onCancel={handleModalCancel}\n          footer={[\n            <Button key=\"back\" onClick={handleModalCancel}>\n              Go back\n            </Button>,\n            <Button\n              key=\"submit\"\n              type=\"primary\"\n              onClick={() => {\n                setModalStatus(false);\n                cancelItemAdd();\n                submitImageData();\n              }}\n            >\n              Continue\n            </Button>,\n          ]}\n        >\n          <div\n            id=\"modalContainer\"\n            style={{ textAlign: \"center\", padding: \"1rem\" }}\n          >\n            <Text>Current Item Not Submitted</Text>\n            <br />\n            <Text>Continue Without Adding Item?</Text>\n          </div>\n        </Modal>\n        <div id=\"imgContainer\">\n          <Row justify=\"center\">\n            <Col>\n              <ImageMapper\n                src={image}\n                map={MAP}\n                width={375}\n                onMouseEnter={(area: any) => {\n                  alert(\"test\");\n                }}\n                onImageClick={(e: any) => {\n                  if (drawingStatus) {\n                    addCoordToItem([\n                      e.nativeEvent.offsetX,\n                      e.nativeEvent.offsetY,\n                    ]);\n                    //fixes lagging state for preview by updating local MAP object and state in same function\n                    MAP.areas[0].coords.push(\n                      e.nativeEvent.offsetX,\n                      e.nativeEvent.offsetY\n                    );\n                  }\n                }}\n              />\n            </Col>\n          </Row>\n          <Row justify=\"center\">\n            <Col span={20} className=\"section\">\n              <Text>Image Position</Text>\n              <Select\n                placeholder=\"Image Position\"\n                style={{ width: \"100%\", margin: \"1rem 0\" }}\n                onChange={positionOnChange}\n                defaultValue={position ? position : \"\"}\n              >\n                {availImagePositions.map((item, i) => {\n                  return (\n                    <Option key={i} value={item}>\n                      {item}\n                    </Option>\n                  );\n                })}\n              </Select>\n            </Col>\n          </Row>\n\n          <Row\n            justify=\"center\"\n            //need to handle height being too small and overlaping buttons\n            style={{ minHeight: \"100vh\" }}\n            className=\"section\"\n          >\n            <Col span={20}>\n              <Form\n                name=\"form\"\n                form={form}\n                labelCol={{ span: 24 }}\n                wrapperCol={{ span: 24 }}\n                onFinish={finishAddItem}\n              >\n                {addItemStatus ? (\n                  <>\n                    <Form.Item\n                      label=\"Item Name\"\n                      name=\"name\"\n                      rules={[\n                        { required: true, message: \"Please input a item name\" },\n                      ]}\n                    >\n                      <Input placeholder=\"Playstation 5\" />\n                    </Form.Item>\n                    <Form.Item\n                      label=\"URL\"\n                      name=\"url\"\n                      rules={[\n                        { required: true, message: \"Please input a url\" },\n                      ]}\n                    >\n                      <Input placeholder=\"www.amazon.com/youraffilatelink\" />\n                    </Form.Item>\n                  </>\n                ) : (\n                  <Button\n                    type=\"primary\"\n                    block\n                    onClick={startItemAdd}\n                    size=\"large\"\n                    shape=\"round\"\n                  >\n                    Add Item\n                  </Button>\n                )}\n                {drawingStatus ? (\n                  <Row justify=\"space-between\">\n                    <Space\n                      direction=\"vertical\"\n                      size={30}\n                      style={{ width: \"100%\" }}\n                    >\n                      <Button\n                        type=\"primary\"\n                        block\n                        shape=\"round\"\n                        size=\"large\"\n                        htmlType=\"submit\"\n                      >\n                        Submit Item\n                      </Button>\n                      <Button\n                        danger\n                        block\n                        shape=\"round\"\n                        size=\"large\"\n                        onClick={undoLastCoord}\n                      >\n                        Undo Last point\n                      </Button>\n                      <Button\n                        danger\n                        block\n                        shape=\"round\"\n                        size=\"large\"\n                        onClick={cancelItemAdd}\n                      >\n                        Cancel Add\n                      </Button>\n                    </Space>\n                  </Row>\n                ) : (\n                  \"\"\n                )}\n              </Form>\n              {addItemStatus && !drawingStatus ? (\n                <Row justify=\"space-between\">\n                  <Space\n                    direction=\"vertical\"\n                    size={30}\n                    style={{ width: \"100%\" }}\n                  >\n                    <Button\n                      type=\"primary\"\n                      block\n                      shape=\"round\"\n                      size=\"large\"\n                      onClick={startDrawing}\n                    >\n                      Draw outline\n                    </Button>\n                    <Button\n                      danger\n                      block\n                      size=\"large\"\n                      shape=\"round\"\n                      onClick={cancelItemAdd}\n                    >\n                      Cancel Adding Item\n                    </Button>\n                  </Space>\n                </Row>\n              ) : (\n                \"\"\n              )}\n              {addItemStatus ? (\n                \"\"\n              ) : (\n                <List style={{ marginTop: \"1rem\" }} itemLayout=\"horizontal\">\n                  {tempAreas.map((item) => {\n                    return (\n                      <List.Item\n                        key={item.id}\n                        actions={[<DeleteTwoTone />]}\n                        onClick={() => {\n                          removeItem(item.id);\n                        }}\n                      >\n                        <List.Item.Meta title={item.name} />\n                      </List.Item>\n                    );\n                  })}\n                </List>\n              )}\n            </Col>\n          </Row>\n          <Row\n            justify=\"space-between\"\n            style={{\n              position: \"absolute\",\n              bottom: \"0\",\n              width: \"100%\",\n              marginBottom: \"1rem\",\n            }}\n          >\n            <Button\n              onClick={() => {\n                handleStepChange(currentStep - 1);\n              }}\n              danger\n              shape=\"circle\"\n              size=\"large\"\n              icon={<ArrowLeftOutlined />}\n            />\n\n            <Button\n              onClick={addItemCheck}\n              type=\"primary\"\n              htmlType=\"submit\"\n              shape=\"circle\"\n              size=\"large\"\n              icon={<ArrowRightOutlined />}\n            />\n          </Row>\n        </div>\n      </div>\n    );\n  } else {\n    return <div>test</div>;\n  }\n};\n\nexport default CreateSetupStepThreeForm;\n"]},"metadata":{},"sourceType":"module"}